<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: domManipulator.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: domManipulator.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module */

const storage = require('./storage');
const commandHandler = require('./commandHandler');
const textTools = require('./textTools');

/**
 * @type {HTMLElement}
 */
const menu = document.getElementById('menu');
/**
 * @type {HTMLElement}
 */
const mainFeed = document.getElementById('mainFeed');
/**
 * User input field
 * @type {HTMLElement}
 */
const cmdInput = document.getElementById('cmdInput');
/**
 * The span infront of the input field
 * @type {HTMLElement}
 */
const inputStart = document.getElementById('inputStart');
/**
 * Span showing the current mode the user is in
 * @type {HTMLElement}
 */
const modeField = document.getElementById('mode');
/**
 * Adds padding to the bottom. Scrolling of the view targets this element
 * @type {HTMLElement}
 */
const spacer = document.getElementById('spacer');
/**
 * List with clickable options
 * @type {HTMLElement}
 */
const menuList = document.getElementById('menuList');
/**
 * @type {HTMLElement}
 */
const videoHolder = document.getElementById('videoHolder');
/**
 * Div containing mainFeed, inputContainer and spacer
 * @type {HTMLElement}
 */
let mainView = document.getElementById('background');
/**
 * @type {HTMLElement}
 */
let secondView = null;
/**
 * @type {boolean}
 */
let oldAndroid;
/**
 * @type {HTMLElement}
 */
let thisCommandItem;

/**
 * Hides (password style) user input
 * @param {boolean} hide - Should input be hidden?
 */
function hideInput(hide) {
  if (hide) {
    cmdInput.setAttribute('type', 'password');
  } else {
    cmdInput.setAttribute('type', 'text');
  }
}

/**
 * Get text from input field
 * @returns {string} - Text from input field
 */
function getInputText() {
  return cmdInput.value;
}

/**
 * Updates command item in menu
 */
function updateThisCommandItem() {
  const command = commandHandler.getCommand(getInputText().split(' ')[0]);
  const span = thisCommandItem.firstElementChild;

  if (command) {
    span.textContent = command.commandName.toUpperCase();
  } else {
    span.textContent = '';
  }
}

/**
 * Set text in input field
 * @param {string} text - Text to be set
 */
function setCommandInput(text) {
  cmdInput.value = text;
  updateThisCommandItem();
}

/**
 * Returns text from input start
 * @returns {string} - Text from input start
 */
function getInputStart() {
  return inputStart.textContent;
}

/**
 * Clear text in input field
 */
function clearInput() {
  setCommandInput('');
}

/**
 * Replaces last part of the input field with sent string
 * @param {string} text - String to replace with
 */
function replaceLastInputPhrase(text) {
  const phrases = getInputText().split(' ');
  phrases[phrases.length - 1] = text;

  setCommandInput(phrases.join(' '));
}

/**
 * Scrolls the list view to the bottom
 */
function scrollView() {
  if (!oldAndroid) {
    spacer.scrollIntoView();
  } else {
    // Compatibility fix for old Android
    window.scrollTo(0, document.body.scrollHeight);
  }
}

/**
 * Set text in mode field (CHAT or CMD)
 * @param {string} text - String to be set
 */
function setModeText(text) {
  modeField.textContent = `[${text}]`;
}

/**
 * Clears text in mode field
 */
function clearModeText() {
  modeField.textContent = '';
}

/**
 * Get text from mode field
 * @returns {string} - Text in mode field
 */
function getModeText() {
  return modeField.textContent;
}

/**
 * Set text in input start
 * @param {string} text - String to be set
 */
function setInputStart(text) {
  inputStart.textContent = text.replace(/\s/g, '-').toLowerCase();
}

/**
 * Replace text in mode field (CMD or CHAT)
 */
function changeModeText() {
  const inputText = getInputText();
  const mode = storage.getMode();

  if (storage.getUser() &amp;&amp; !commandHandler.commandHelper.command) {
    // TODO msg command text in comparison should not be hard coded
    if ((mode === 'chat' &amp;&amp; commandHandler.isCommandChar(inputText.charAt(0))) || (mode === 'cmd' &amp;&amp; textTools.trimSpace(inputText).split(' ')[0] !== 'msg')) {
      setModeText('CMD');
    } else {
      setModeText('CHAT');
    }
  }
}

/**
 * Set second view, which will be shown above/to the left of the main view
 * @param {HTMLElement} view - Second side view
 */
function setSecondView(view) {
  secondView = view;
}

/**
 * Gets second view, which is shown above/to the left of the main view
 * @returns {HTMLElement} - Second side view
 */
function getSecondView() {
  return secondView;
}

/**
 * Get the main view
 * @returns {HTMLElement} - Main view
 */
function getMainView() {
  return mainView;
}

/**
 * Get the space, which is used as a point of reference when scrolling to the bottom of the main view
 * @returns {HTMLElement} - Spacer
 */
function getSpacer() {
  return spacer;
}

/**
 * Set focus on the input field
 */
function focusInput() {
  cmdInput.focus();
}

/**
 * Remove focus from the input field
 */
function blurInput() {
  cmdInput.blur();
}

/**
 * Add a new item to the menu
 * @param {HTMLElement} item - New item in the menu
 */
function addMenuItem(item) {
  menuList.appendChild(item);
}

/**
 * Add a sub menu
 * @param {string} elementId - Id of the element to receive a sub menu
 * @param {HTMLElement} item - New sub menu
 */
function addSubMenuItem(elementId, item) {
  const element = Array.from(menuList.children).find((elem) => elem.id === elementId);

  if (element) {
    element.appendChild(item);
  }
}

/**
 * Set the main view
 * @param {HTMLElement} view - New main view
 */
function setMainView(view) {
  mainView = view;
}

/**
 * Clear main list
 */
function clearMainFeed() {
  while (mainFeed.childNodes.length > 1) {
    mainFeed.removeChild(mainFeed.lastChild);
  }
}

/**
 * Get menu
 * @returns {HTMLElement} - Menu element
 */
function getMenu() {
  return menu;
}

/**
 * Set command item in menu
 * @param {HTMLElement} item - New command item
 */
function setThisCommandItem(item) {
  thisCommandItem = item;
}

/**
 * Get command item from menu
 * @returns {HTMLElement} - Command item
 */
function getThisCommandItem() {
  return thisCommandItem;
}

/**
 * Append string to input field
 * @param {string} text - New string to be appended
 */
function appendInputText(text) {
  const currentInputText = getInputText();
  let appendText = '';

  if (currentInputText[currentInputText.length - 1] !== ' ') {
    appendText = ' ';
  }

  appendText += text;

  setCommandInput(currentInputText + appendText);
}

/**
 * Removes sub menu from item in the menu
 */
function removeSubMenu() {
  const commandList = menuList.lastChild;

  if (commandList.lastChild.tagName === 'UL') {
    commandList.removeChild(commandList.lastChild);
  }
}

/**
 * Get div with video in it
 * @returns {HTMLElement} - Div with video
 */
function getVideoHolder() {
  return videoHolder;
}

exports.setInputStart = setInputStart;
exports.setCommandInput = setCommandInput;
exports.getInputText = getInputText;
exports.clearInput = clearInput;
exports.getModeText = getModeText;
exports.scrollView = scrollView;
exports.getSecondView = getSecondView;
exports.setSecondView = setSecondView;
exports.getMainView = getMainView;
exports.hideInput = hideInput;
exports.getSpacer = getSpacer;
exports.clearModeText = clearModeText;
exports.changeModeText = changeModeText;
exports.focusInput = focusInput;
exports.blurInput = blurInput;
exports.addMenuItem = addMenuItem;
exports.replaceLastInputPhrase = replaceLastInputPhrase;
exports.setMainView = setMainView;
exports.getInputStart = getInputStart;
exports.clearMainFeed = clearMainFeed;
exports.getMenu = getMenu;
exports.addSubMenuItem = addSubMenuItem;
exports.setThisCommandItem = setThisCommandItem;
exports.getThisCommandItem = getThisCommandItem;
exports.appendInputText = appendInputText;
exports.updateThisCommandItem = updateThisCommandItem;
exports.removeSubMenu = removeSubMenu;
exports.getVideoHolder = getVideoHolder;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-audio.html">audio</a></li><li><a href="module-clickHandler.html">clickHandler</a></li><li><a href="module-cmdsAdmin.html">cmdsAdmin</a></li><li><a href="module-cmdsBbr.html">cmdsBbr</a></li><li><a href="module-cmdsChat.html">cmdsChat</a></li><li><a href="module-cmdsInfo.html">cmdsInfo</a></li><li><a href="module-cmdsLocal.html">cmdsLocal</a></li><li><a href="module-cmdsMap.html">cmdsMap</a></li><li><a href="module-cmdsSatellite.html">cmdsSatellite</a></li><li><a href="module-cmdsTeam.html">cmdsTeam</a></li><li><a href="module-cmdsUser.html">cmdsUser</a></li><li><a href="module-cmdsUtility.html">cmdsUtility</a></li><li><a href="module-commandHandler.html">commandHandler</a></li><li><a href="module-domManipulator.html">domManipulator</a></li><li><a href="module-labels.html">labels</a></li><li><a href="module-layoutChanger.html">layoutChanger</a></li><li><a href="module-mapTools.html">mapTools</a></li><li><a href="module-messenger.html">messenger</a></li><li><a href="module-painter.html">painter</a></li><li><a href="module-socketHandler.html">socketHandler</a></li><li><a href="module-storage.html">storage</a></li><li><a href="module-textTools.html">textTools</a></li><li><a href="module-videoPlayer.html">videoPlayer</a></li><li><a href="module-zalgoGenerator.html">zalgoGenerator</a></li></ul><h3>Global</h3><ul><li><a href="global.html#autoCompleteOption">autoCompleteOption</a></li><li><a href="global.html#commandQueue">commandQueue</a></li><li><a href="global.html#commandTime">commandTime</a></li><li><a href="global.html#goFullScreen">goFullScreen</a></li><li><a href="global.html#isScreenOff">isScreenOff</a></li><li><a href="global.html#isTouchDevice">isTouchDevice</a></li><li><a href="global.html#keyPressed">keyPressed</a></li><li><a href="global.html#keyReleased">keyReleased</a></li><li><a href="global.html#lastScreenOff">lastScreenOff</a></li><li><a href="global.html#match">match</a></li><li><a href="global.html#morseSeparator">morseSeparator</a></li><li><a href="global.html#onStartup">onStartup</a></li><li><a href="global.html#onVideoMessage">onVideoMessage</a></li><li><a href="global.html#pausePositionTime">pausePositionTime</a></li><li><a href="global.html#preparePosition">preparePosition</a></li><li><a href="global.html#refocus">refocus</a></li><li><a href="global.html#screenOffIntervalTime">screenOffIntervalTime</a></li><li><a href="global.html#setIntervals">setIntervals</a></li><li><a href="global.html#soundQueue">soundQueue</a></li><li><a href="global.html#watchPositionTime">watchPositionTime</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Jun 21 2016 22:00:47 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
